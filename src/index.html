<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <title>React App</title>
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<div id="root"></div>

<script>
const memory = new WebAssembly.Memory({initial: 256});

const importObj = {
    global: {},
    env: {
        // abortStackOverflow: () => { throw new Error('overflow'); },
        // table: new WebAssembly.Table({ initial: 0, maximum: 0, element: 'anyfunc' }),
        // tableBase: 0,
        // memory: memory,
        // memoryBase: 1024,
        // STACKTOP: 0,
        // STACK_MAX: memory.buffer.byteLength,
        wasi_unstable:() => console.log(1)
    }
};

var CModule;


fetch('../factorial.wasm').then(response =>
  response.arrayBuffer()
).then(bytes => {
    console.log(bytes);
    // debugger
    return WebAssembly.instantiate(bytes, importObj)
}
).then(results => {
    console.log(results);
    CModule = results.instance.exports;
  // Do something
});

console.log(CModule);

</script>
</body>
</html>
